# AkieGUI:é€ç»™å„ä½ç»˜æ˜Ÿçš„åµŒå…¥å¼æç®€å›¾å½¢åº“ ğŸ

[![License: AGPL v3](https://img.shields.io/badge/License-AGPLv3-blue.svg)](https://www.gnu.org/licenses/agpl-3.0.html)
[![Platform: ARM Cortex-M](https://img.shields.io/badge/Platform-ARM%20Cortex--M-blue)](https://www.arm.com/zh-cn/architecture/cpu/m-profile)
[![Language: C](https://img.shields.io/badge/Language-%20C-blue)]()

![AkieGUI Logo](./assets/AkieGUI_Logo.png)
(Logoç”±SakuraOfficialä½¿ç”¨Akieç§‹ç»˜çš„å½¢è±¡å…ƒç´ åˆ›ä½œ)

## AkieGUI æ˜¯ä¸€ä¸ªä¸ºåµŒå…¥å¼è®¾å¤‡è®¾è®¡çš„**æç®€ã€é›¶ä¾èµ–ã€é«˜å¯ç§»æ¤**çš„å›¾å½¢åº“ã€‚ä¸“ä¸ºèµ„æºå—é™çš„MCUï¼ˆSTM32/RP2350/ESP32ç­‰ï¼‰æ‰“é€ ã€‚

- [ğŸ¨ åŸåˆ›å£°æ˜](#-åŸåˆ›å£°æ˜)
- [â­ ä¸ºä»€ä¹ˆå« AkieGUIï¼Ÿ](#-ä¸ºä»€ä¹ˆå«-akiegui)
- [âœ¨ ç‰¹æ€§](#-ç‰¹æ€§)
- [ğŸ“Š èµ„æºå ç”¨](#-èµ„æºå ç”¨)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
  - [1. å¤åˆ¶æ–‡ä»¶åˆ°ä½ çš„å·¥ç¨‹](#1-å¤åˆ¶æ–‡ä»¶åˆ°ä½ çš„å·¥ç¨‹)
  - [2. é…ç½® `akiegui_config.h`](#2-é…ç½®-akiegui_configh)
  - [3. å®ç°å±å¹•é©±åŠ¨ (å”¯ä¸€å¿…é¡»å†™çš„ä»£ç )](#3-å®ç°å±å¹•é©±åŠ¨-å”¯ä¸€å¿…é¡»å†™çš„ä»£ç )
- [ğŸ“– API æ–‡æ¡£](#-api-æ–‡æ¡£)
  - [å†…å­˜ç®¡ç† API](#å†…å­˜ç®¡ç†-api)
- [å›¾å½¢æ ¸å¿ƒ API](#å›¾å½¢æ ¸å¿ƒ-api)
- [ğŸ”§ ç§»æ¤æŒ‡å—](#-ç§»æ¤æŒ‡å—)
  - [æ­¥éª¤1ï¼šå®ç°å‘é€å‡½æ•°](#æ­¥éª¤1å®ç°å‘é€å‡½æ•°)
  - [æ­¥éª¤2ï¼šå¤„ç†TEä¿¡å·ï¼ˆå¯é€‰ï¼‰](#æ­¥éª¤2å¤„ç†teä¿¡å·å¯é€‰)
- [ğŸ¯ ç¤ºä¾‹åœºæ™¯](#-ç¤ºä¾‹åœºæ™¯)
  - [åœºæ™¯1ï¼šSPIå½©å± + DMAï¼ˆä¸»æµæ–¹æ¡ˆï¼‰](#åœºæ™¯1spiå½©å±--dmaä¸»æµæ–¹æ¡ˆ)
  - [åœºæ™¯2ï¼šSPIå½©å± + BDMAï¼ˆSTM32H7 D3åŸŸï¼‰](#åœºæ™¯2spiå½©å±--bdmastm32h7-d3åŸŸ)
  - [åœºæ™¯3ï¼šæ— DMAï¼Œè½®è¯¢å‘é€ï¼ˆä½ç«¯MCUï¼‰](#åœºæ™¯3æ— dmaè½®è¯¢å‘é€ä½ç«¯mcu)
  - [åœºæ™¯4ï¼šFreeRTOSå¤šä»»åŠ¡](#åœºæ™¯4freertoså¤šä»»åŠ¡)
- [ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®](#-æ€§èƒ½ä¼˜åŒ–å»ºè®®)
- [âœ… å·²çŸ¥é—®é¢˜ \& è§£å†³æ–¹æ¡ˆ](#-å·²çŸ¥é—®é¢˜--è§£å†³æ–¹æ¡ˆ)
- [ğŸ“„ å¼€æºåè®®](#-å¼€æºåè®®)
- [âš–ï¸ AGPLv3 æ ¸å¿ƒè¦æ±‚](#ï¸-agplv3-æ ¸å¿ƒè¦æ±‚)
  - [âœ… å…è®¸çš„ï¼ˆå…è´¹ï¼Œæ— éœ€è”ç³»æˆ‘ï¼‰ï¼š](#-å…è®¸çš„å…è´¹æ— éœ€è”ç³»æˆ‘)
  - [âŒ ä¸å…è®¸çš„ï¼ˆåˆ«è¿™ä¹ˆå¹²ï¼‰ï¼š](#-ä¸å…è®¸çš„åˆ«è¿™ä¹ˆå¹²)
- [ğŸ¤ è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
  - [é¦–æ¬¡è´¡çŒ®ï¼Ÿæ²¡é—®é¢˜ï¼ å¯ä»¥ä»ä»¥ä¸‹æ–¹é¢å…¥æ‰‹ï¼š](#é¦–æ¬¡è´¡çŒ®æ²¡é—®é¢˜-å¯ä»¥ä»ä»¥ä¸‹æ–¹é¢å…¥æ‰‹)
- [ğŸ ç‰¹åˆ«è‡´è°¢](#-ç‰¹åˆ«è‡´è°¢)
- [ğŸ“® è”ç³»æ–¹å¼](#-è”ç³»æ–¹å¼)
- [ğŸ“¢ è¿è§„ä½¿ç”¨ä¸¾æŠ¥é€šé“](#-è¿è§„ä½¿ç”¨ä¸¾æŠ¥é€šé“)

> [!IMPORTANT]
> ### å½“å‰é˜¶æ®µå’Œå®ç°çš„åŠŸèƒ½ï¼Ÿ
> å½“å‰åœ¨è¿˜æœªå®é™…ä¸Šæœºè¿›è¡Œæµ‹è¯•çš„Nativeé˜¶æ®µï¼Œå®ç°äº†å†…å­˜ç®¡ç†å’Œæ˜¾å­˜å‘é€æ“ä½œã€‚
>
> è¯·æ³¨æ„ï¼Œä»£ç ç¤ºä¾‹é‡Œæœ‰éƒ¨åˆ†APIæ˜¯ç›®å‰æœªå®ç°çš„ï¼Œéœ€è¦ç­‰å¾…åç»­çš„æµ‹è¯•åæ›´æ–°ã€‚
> 

## ğŸ¨ åŸåˆ›å£°æ˜

**AkieGUI æ˜¯ 100% åŸåˆ›è®¾è®¡ï¼Œæœªå‚è€ƒä»»ä½•ç°æœ‰å›¾å½¢åº“ã€‚**

å®ƒä¸æ˜¯ LittlevGL çš„ç®€åŒ–ç‰ˆï¼Œä¸æ˜¯ U8g2 çš„ç§»æ¤ï¼Œä¹Ÿä¸æ˜¯ emWin çš„å¹³æ›¿ã€‚

AkieGUI çš„æ¯ä¸€è¡Œä»£ç éƒ½æ¥è‡ªå®é™…é¡¹ç›®ä¸­çš„ç—›ç‚¹ï¼š
- BDMA æ— æ³•ç›´æ¥è®¿é—® SDRAMï¼Ÿ
- SRAM3 å°å¾—å¯æ€œï¼Ÿ
- åªæƒ³ç”»ä¸ªå±å´è¦é…ç½®ä¸€å †å¤æ‚ç»“æ„ä½“ï¼Ÿ

æ‰€ä»¥æœ‰äº† AkieGUI â€”â€” **ä¸ºçœŸå®é—®é¢˜è€Œç”Ÿï¼Œä¸ºæç®€è€Œå†™ã€‚**

## â­ ä¸ºä»€ä¹ˆå« AkieGUIï¼Ÿ

**AkieGUI** çš„åå­—æ¥æºäº Bç«™è™šæ‹Ÿå”±è§ [**Akieç§‹ç»˜**](https://space.bilibili.com/4176573)ï¼š

- ğŸ **ç§‹** - ç§‹å¤©ï¼Œæ”¶è·çš„å­£èŠ‚ï¼ˆæ„¿ä½ ç”¨è¿™ä¸ªåº“ä¹Ÿèƒ½æ”¶è·æˆæœï¼‰
- ğŸ¨ **ç»˜** - ç»˜ç”»ï¼Œå›¾å½¢åº“çš„æœ¬èŒå·¥ä½œ
- ğŸµ **ç§‹ç»˜** - æ¸©æš–æ¸…æ¾ˆçš„æ­Œå£°ï¼Œé™ªä¼´æˆ‘å†™å®Œæ¯ä¸€è¡Œä»£ç 

å†™ä»£ç çš„æ—¶å€™ä¸€ç›´å¾ªç¯ç§‹ç»˜çš„æ­Œå•(åŒæ—¶ä½œä¸º2027çš„ç²‰ä¸äºŒåˆ›)ï¼Œæ‰€ä»¥è¿™ä¸ªåº“å°±å« AkieGUI äº†ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ¯ **æç®€è®¾è®¡** - æ ¸å¿ƒä»…2ä¸ªæ–‡ä»¶ï¼Œæ— å¤æ‚æŠ½è±¡ï¼Œæ˜“è¯»æ˜“æ”¹
- ğŸ’¾ **å†…å­˜è‡ªä¸»** - å†…ç½®å†…å­˜æ± ç®¡ç†å™¨ï¼Œä¸ä¾èµ–malloc/free
- ğŸ”„ **åŒç¼“å†²** - å¯é€‰åŒç¼“å†²ï¼Œå½»åº•æ¶ˆé™¤æ’•è£‚
- âš¡ **TEæ„ŸçŸ¥** - æ”¯æŒä»»ä½•å½¢å¼çš„ä¼ è¾“å®Œæˆé€šçŸ¥ï¼ˆDMA/GPIO/è½®è¯¢ï¼‰
- ğŸ§© **é«˜åº¦å¯ç§»æ¤** - åªéœ€å®ç°`send_frame`ä¸€ä¸ªå‡½æ•°
- ğŸ”§ **FreeRTOSå°±ç»ª** - ä¸€ä¸ªå®å¼€å…³ï¼Œæ— ç¼åˆ‡æ¢
- ğŸš« **é›¶åŠ¨æ€å†…å­˜** - é™æ€å†…å­˜æ± ï¼Œè¿è¡Œæ—¶ç¡®å®š

## ğŸ“Š èµ„æºå ç”¨

| é…ç½® | FLASH | RAM | å¸§ç¼“å†² |
|------|-------|-----|--------|
| æ ¸å¿ƒåº“ | ~2KB | ~40å­—èŠ‚ | å¤–éƒ¨ç®¡ç† |
| 320x240 RGB565 | +0 | 150KB | ç”¨æˆ·åˆ†é… |
| 800x480 RGB565 | +0 | 750KB | ç”¨æˆ·åˆ†é… |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¤åˆ¶æ–‡ä»¶åˆ°ä½ çš„å·¥ç¨‹
    your_project/
    â”œâ”€â”€ AkieGUI/
    | â”œâ”€â”€ Core/
    | | â”œâ”€â”€ Inc/
    | | | â”œâ”€â”€ akiegui_core.h
    | | | â”œâ”€â”€ akiegui_memory.h
    | | â”œâ”€â”€ Src/
    | | | â”œâ”€â”€ akiegui_core.c
    | | | â”œâ”€â”€ akiegui_memory.c
    â”‚ â”œâ”€â”€ akiegui_config.h
    â”‚ â”œâ”€â”€ akiegui.h
    â””â”€â”€ main.c

### 2. é…ç½® `akiegui_config.h`

```c
/* é€‰æ‹©å†…å­˜ç®¡ç†æ–¹å¼ */
#define AkieGUI_USE_FREERTOS 0   /* 0=è£¸æœºå†…å­˜æ± , 1=FreeRTOSå † */

/* é€‰æ‹©TEæ¨¡å¼ */
#define AkieGUI_KE_NO_TE 0  // éTEæ¨¡å¼
#define AkieGUI_KE_TE_EN 1  // å¯ç”¨TEç­‰å¾…

#define AkieGUI_TE_MODE     AkieGUI_KE_NO_TE

/* é€‰æ‹©æ˜¾å­˜ä½ç½® */
#define AkieGUI_MEM_TYPE    AkieGUI_MEM_INTERNAL /* 0=å†…éƒ¨RAM, 1=å¤–éƒ¨SDRAM */
```

### 3. å®ç°å±å¹•é©±åŠ¨ (å”¯ä¸€å¿…é¡»å†™çš„ä»£ç )
```c
#include "akiegui.h"

/* SPI DMAå‘é€å®Œæˆä¸­æ–­ */
void HAL_SPI_TxCpltCallback(SPI_HandleTypeDef *hspi) {
    if (hspi == &hspi6) {
        AkieGUI_TransmitEnd();  /* é€šçŸ¥å›¾å½¢åº“ä¼ è¾“å®Œæˆ */
    }
}

/* æ•´å¸§å‘é€å‡½æ•°ï¼ˆä½ å¿…é¡»å®ç°ï¼‰*/
void my_send_frame(uint8_t *data, uint32_t len) {
    HAL_SPI_Transmit_IT(&hspi6, data, len);  /* ä½ çš„å‘é€ä»£ç  */
}

int main(void) {
    /* 1. åˆå§‹åŒ–å†…å­˜æ± ï¼ˆè£¸æœºç‰ˆï¼‰*/
    static uint8_t mem_pool[512 * 1024];
    AkieGUI_MemInit(mem_pool, sizeof(mem_pool));
    
    /* 2. æ³¨å†Œé©±åŠ¨ */
    g_akiegui.send_frame = my_send_frame;
    
    /* 3. åˆå§‹åŒ–å¸§ç¼“å†²ï¼ˆ320x240 RGB565 åŒç¼“å†²ï¼‰*/
    AkieGUI_FBInit();
    
    /* 4. ç»˜åˆ¶çº¢è‰² */
    memset(AkieGUI_GetDrawFB(), 0xF800, g_akiegui.fb_size);
    
    /* 5. æäº¤åˆ°å±å¹• */
    AkieGUI_Commit();
#if AKIEGUI_TE_MODE == AkieGUI_KE_TE_EN
    AkieGUI_WaitTE();  /* ç­‰å¾…å‘é€å®Œæˆ */
#endif
    AkieGUI_SwapBuffer(); /* åŒç¼“å†²äº¤æ¢ */
    
    while(1) {
        /* ä½ çš„åº”ç”¨ä»£ç  */
    }
}
```

## ğŸ“– API æ–‡æ¡£
### å†…å­˜ç®¡ç† API

| å‡½æ•° | æè¿° |
|------|------|
| AkieGUI_MemInit(pool, size) | åˆå§‹åŒ–å†…å­˜æ± ï¼ˆè£¸æœºç‰ˆï¼‰|
| AkieGUI_MemAlloc(size) | åˆ†é…å†…å­˜ï¼ˆé»˜è®¤16å­—èŠ‚å¯¹é½ï¼‰|
| AkieGUI_MemAllocAlign(size, align) | åˆ†é…å¯¹é½å†…å­˜ |
| AkieGUI_MemCalloc(nmemb, size) | åˆ†é…å¹¶æ¸…é›¶ |
| AkieGUI_MemFree(ptr) | é‡Šæ”¾å†…å­˜ |
| AkieGUI_MemGetFree() | è·å–ç©ºé—²å†…å­˜å¤§å° |
| AkieGUI_MemGetUsed() | è·å–å·²ç”¨å†…å­˜å¤§å° |

## å›¾å½¢æ ¸å¿ƒ API
| å‡½æ•° | æè¿°  | 
|-------------|----------------|
|AkieGUI_FBInit() | åˆå§‹åŒ–å¸§ç¼“å†² |
|AkieGUI_GetDrawFB() |	è·å–å½“å‰ç»˜åˆ¶ç¼“å†²åŒº |
|AkieGUI_GetDispFB() | è·å–å½“å‰æ˜¾ç¤ºç¼“å†²åŒº |
|AkieGUI_SwapBuffer() | äº¤æ¢åŒç¼“å†² |
|AkieGUI_Commit() | æäº¤æ•´å¸§åˆ°å±å¹• |
|AkieGUI_CommitRegion(x, y, w, h) | æäº¤åŒºåŸŸåˆ°å±å¹• (éœ€å®ç° send_region é©±åŠ¨) |
|AkieGUI_SendFrame(data, len) | å‘é€å¸§ï¼ˆå†…éƒ¨è°ƒç”¨ï¼‰ |
|AkieGUI_WaitTE() | ç­‰å¾…ä¼ è¾“å®Œæˆ |
|AkieGUI_TransmitEnd() | å¿…é¡»åœ¨ä¸­æ–­è°ƒç”¨ï¼é€šçŸ¥ä¼ è¾“å®Œæˆ |

## ğŸ”§ ç§»æ¤æŒ‡å—
### æ­¥éª¤1ï¼šå®ç°å‘é€å‡½æ•°
```c
/* å¿…é¡»å®ç° - æ•´å¸§å‘é€ */
void my_send_frame(uint8_t *data, uint32_t len) {
    /* ä½ çš„ç¡¬ä»¶å‘é€ä»£ç  */
}

/* å¯é€‰å®ç° - åŒºåŸŸå‘é€ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰*/
void my_send_region(uint16_t x, uint16_t y, uint16_t w, uint16_t h, uint8_t *data) {
    LCD_SetWindow(x, y, x+w-1, y+h-1);
    my_send_frame(data, w * h * (g_akiegui.fb_bpp/8));
}
```
### æ­¥éª¤2ï¼šå¤„ç†TEä¿¡å·ï¼ˆå¯é€‰ï¼‰
```c
/* ä»»ä½•ä¼ è¾“å®Œæˆä¸­æ–­é‡Œè°ƒç”¨ */
void DMA2D_IRQHandler(void) {
    AkieGUI_TransmitEnd();
}

void EXTI9_5_IRQHandler(void) {  /* TEå¼•è„šä¸­æ–­ */
    AkieGUI_TransmitEnd();
}

void BDMA_Channel0_IRQHandler(void) {
    AkieGUI_TransmitEnd();
}
```

## ğŸ¯ ç¤ºä¾‹åœºæ™¯
### åœºæ™¯1ï¼šSPIå½©å± + DMAï¼ˆä¸»æµæ–¹æ¡ˆï¼‰
```c
void my_send_frame(uint8_t *data, uint32_t len) {
    HAL_SPI_Transmit_DMA(&hspi6, data, len);
}
```
### åœºæ™¯2ï¼šSPIå½©å± + BDMAï¼ˆSTM32H7 D3åŸŸï¼‰
```c
static uint8_t sram3_buf[1024] __attribute__((section(".sram3")));

void my_send_frame(uint8_t *data, uint32_t len) {
    /* åˆ†å—ä¼ è¾“ï¼šSDRAM â†’ SRAM3 â†’ BDMA â†’ SPI */
    for(uint32_t i = 0; i < len; i += 1024) {
        uint32_t chunk = min(1024, len - i);
        memcpy(sram3_buf, data + i, chunk);
        HAL_DMA_Start_IT(&hbdma0, sram3_buf, &hspi6.Instance->DR, chunk);
    }
}
```
### åœºæ™¯3ï¼šæ— DMAï¼Œè½®è¯¢å‘é€ï¼ˆä½ç«¯MCUï¼‰
```c
void my_send_frame(uint8_t *data, uint32_t len) {
    HAL_SPI_Transmit(&hspi6, data, len, HAL_MAX_DELAY);
    AkieGUI_TransmitEnd();  /* ç«‹å³é€šçŸ¥å®Œæˆ */
}
```
### åœºæ™¯4ï¼šFreeRTOSå¤šä»»åŠ¡
```c
/* akiegui_config.h */
#define AKIEGUI_USE_FREERTOS 1  /* åˆ‡æ¢åˆ°FreeRTOS */

/* ä»»åŠ¡1ï¼šç»˜åˆ¶åŠ¨ç”» */
void task_draw(void *arg) {
    while(1) {
        draw_ui(AkieGUI_GetDrawFB());
        AkieGUI_Commit();
        vTaskDelay(16);
    }
}

/* ä»»åŠ¡2ï¼šå¤„ç†è§¦æ‘¸ */
void task_touch(void *arg) {
    while(1) {
        /* ç›´æ¥ä½¿ç”¨AkieGUI_MemAllocï¼Œçº¿ç¨‹å®‰å…¨ */
        void *buf = AkieGUI_MemAlloc(1024);
        AkieGUI_MemFree(buf);
    }
}
```

> [!NOTE]
> ## ä»¥ä¸‹ä»£ç é€»è¾‘å·²å†™å®Œï¼Œä½†ä½œè€…äººåœ¨å¤–åœ°æš‚æ— æ³•å®æµ‹
> å¦‚æœä½ æ‰‹å¤´æœ‰ RGB å±å¹•ï¼ˆSTM32H7/F7 ç³»åˆ— + LTDCï¼‰ï¼Œæ¬¢è¿å¸®å¿™éªŒè¯ã€‚
> é‡åˆ°é—®é¢˜å¯ä»¥æ Issueï¼Œé™„ä¸Šè°ƒè¯•ä¿¡æ¯ï¼Œå’±ä»¬ä¸€èµ·ä¿®ã€‚
> 
> ä»£ç æ”¾è¿™é‡Œä¸æ˜¯ä¸ºäº†å‘äººï¼Œæ˜¯ä¸ºäº†ï¼š
> 1. ç»™æœ‰åŒæ ·éœ€æ±‚çš„äººä¸€ä¸ªå‚è€ƒ
> 2. ç­‰ PR æˆ–è€…ä½œè€…å›å»æ‹¿å±å¹•é…ç¡¬ä»¶æ¥å®Œå–„å®ƒ
> ### åœºæ™¯5ï¼šLTDC + DMA2Dï¼ˆRGBæ¥å£é«˜é€Ÿå±ï¼‰
> ```c
> static volatile uint8_t dma2d_busy = 0;
>
> /* STM32H7/F7 ç³»åˆ—ï¼Œ800x480 ARGB8888ï¼ŒDMA2DåŠ é€Ÿ */
> void my_send_frame(uint8_t *data, uint32_t len) {
>     (void)len;
>     /* æ¸…ç†æ— æ•ˆçš„æ•°æ®ç¼“å­˜ */
>     /* å¦‚æœMCUæœ‰D-Cacheï¼Œéœ€è¦åšCacheç»´æŠ¤ã€‚å¦‚æœæ— Cacheï¼Œå¯æ³¨é‡Šæ‰ */
>     SCB_CleanInvalidateDCache();
>     /* é…ç½®DMA2Då¯„å­˜å™¨ï¼ˆç›´æ¥æ“ä½œå¯„å­˜å™¨ï¼Œæ— HALå¼€é”€ï¼‰*/
>     DMA2D->CR = 0x00000000UL | (1 << 9);                            /* å†…å­˜åˆ°å†…å­˜æ¨¡å¼ */
>     DMA2D->FGMAR = (uint32_t)data;                                  /* æºåœ°å€ï¼ˆLVGLç»˜åˆ¶ç¼“å†²åŒºï¼‰*/
>     DMA2D->OMAR = AkieGUI_MEM_ADDR;                                 /* ç›®æ ‡åœ°å€ï¼ˆLTDCæ˜¾å­˜ï¼‰*/
>     DMA2D->FGOR = 0;                                                /* æºè¡Œåç§» */
>     DMA2D->OOR = 0;                                                 /* ç›®æ ‡è¡Œåç§» */
>     DMA2D->FGPFCCR = DMA2D_OUTPUT_ARGB8888;                         /* 32ä½é¢œè‰²æ ¼å¼ */
>     DMA2D->OPFCCR = DMA2D_OUTPUT_ARGB8888;
>     DMA2D->NLR = (AkieGUI_LCD_WIDTH << 16) | AkieGUI_LCD_HEIGHT;    /* è¡Œåˆ—æ•° */
>     DMA2D->CR |= DMA2D_IT_TC;                                       /* å¼€å¯ä¼ è¾“å®Œæˆä¸­æ–­ */
>     DMA2D->CR |= DMA2D_CR_START;                                    /* å¯åŠ¨ä¼ è¾“ */
>     
>     dma2d_busy = 1;
> }
> 
> /* è¯·æ³¨å†Œä¸€ä¸ªæˆ–ä½¿ç”¨ç°æœ‰çš„DMA2Dä¼ è¾“å®Œæˆå›è°ƒå‡½æ•° */
> void mDMA2DCpltCallback(DMA2D_HandleTypeDef *hdma2d) {
>     if (hdma2d->Instance==DMA2D)
>     {
>         if(dma2d_busy == 1)
>         {
>             AkieGUI_TransmitEnd();                                  /* é€šçŸ¥ä¼ è¾“å®Œæˆ */
>             dma2d_busy = 0;
>         }
>     }
> }
> ```
> 
> ### åœºæ™¯6ï¼šLTDC + åŒç¼“å†² + TEï¼ˆé›¶æ’•è£‚ï¼‰
> ```c
> /* send_frame å‡½æ•°*/
> void my_send_frame(uint8_t *data, uint32_t len) {
>     (void)len;
>     LTDC_Layer1->CFBAR = (uint32_t)data;			// åˆ‡æ¢æ˜¾å­˜åœ°å€
> }
> 
> /* åˆ©ç”¨LTDCçš„è¡Œäº‹ä»¶ä¸­æ–­åˆ‡æ¢æ˜¾å­˜åœ°å€ */
> void HAL_LTDC_LineEventCallback(LTDC_HandleTypeDef *hltdc) {
>     __HAL_LTDC_RELOAD_CONFIG(hltdc);
>     HAL_LTDC_ProgramLineEvent(hltdc, 0);
>     AkieGUI_TransmitEnd();      /* é€šçŸ¥å›¾å½¢åº“ */
> }
> ```
> è¿™ä¸¤ç§é‡åˆ°é—®é¢˜ä¹Ÿåˆ«æ…Œ~å¯ä»¥æ’ç‚¹æ–­ç‚¹æ’æŸ¥
>
> æ Issue æ—¶è¯·é™„ä¸Šï¼š
> - MCU å‹å·
> - å±å¹•è§„æ ¼ï¼ˆåˆ†è¾¨ç‡/æ¥å£ï¼‰
> - è°ƒè¯•è¾“å‡ºï¼ˆå¦‚æœæœ‰ï¼‰
> 
> å†™å‡ºè¿™äº›ä¿¡æ¯å¯ä»¥è®© Issue è´¨é‡æ›´é«˜ï¼Œä¹Ÿæ–¹ä¾¿å¼€å‘è€…å¤ç°è°ƒè¯•

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®
1. **ä½¿ç”¨åŒç¼“å†²** + `AkieGUI_SwapBuffer()` - å½»åº•æ¶ˆé™¤æ’•è£‚

2. **å®ç°**`send_region` - åªæ›´æ–°å˜åŒ–åŒºåŸŸ

3. **å¯ç”¨TEæ¨¡å¼** - ç­‰å¾…VSYNCï¼Œé¿å…åŠå¸§

4. **å¯¹é½32å­—èŠ‚** - é…åˆDMA2D/BDMAæ€§èƒ½æœ€ä½³

5. **å†…å­˜æ± å¤§å°** - å¸§ç¼“å†²2å€ + 20%ä½™é‡

## âœ… å·²çŸ¥é—®é¢˜ & è§£å†³æ–¹æ¡ˆ
| é—®é¢˜ | åŸå›  | è§£å†³ |
|------|-----|------|
|å±å¹•ä¸äº® | send_frameæœªå®ç° | æ£€æŸ¥å‡½æ•°æŒ‡é’ˆæ˜¯å¦èµ‹å€¼|
|èŠ±å± | å¸§ç¼“å†²å¤§å°é”™è¯¯/é¢œè‰²æ ¼å¼ä¸åŒ¹é… | æ£€æŸ¥fb_bppå’Œfb_size/AkieGUI_LCD_BPPèµ‹å€¼ |
|å¡æ­»åœ¨WaitTE | æœªè°ƒç”¨TransmitEnd | æ£€æŸ¥ä¸­æ–­æ˜¯å¦æ­£ç¡®è°ƒç”¨ |
|å†…å­˜åˆ†é…å¤±è´¥ | å†…å­˜æ± å¤ªå° | å¢å¤§å†…å­˜æ± æˆ–å‡å°‘åŒç¼“å†² |

## ğŸ“„ å¼€æºåè®®
**AkieGUI Â©** 2026 [é›ªç³Sherlyn/Xuelin-Sherlyn]

æœ¬è½¯ä»¶é‡‡ç”¨ **GNU Affero General Public License v3.0 (AGPLv3)** åè®®å‘å¸ƒã€‚
```text
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program. If not, see <https://www.gnu.org/licenses/>.
```

## âš–ï¸ AGPLv3 æ ¸å¿ƒè¦æ±‚
### âœ… å…è®¸çš„ï¼ˆå…è´¹ï¼Œæ— éœ€è”ç³»æˆ‘ï¼‰ï¼š
- ä¸ªäººå­¦ä¹ ã€ç ”ç©¶

- æ¯•è®¾/è¯¾ç¨‹è®¾è®¡ï¼ˆå¿…é¡»å¼€æºã€å¿…é¡»æ³¨æ˜æ¥æºï¼‰

- å¼€æºé¡¹ç›®ï¼ˆå¿…é¡»åŒæ ·ä»¥AGPLv3å¼€æºï¼‰

- å•†ä¸šäº§å“ï¼ˆå¿…é¡»å¼€æºä½ çš„ä¿®æ”¹ï¼‰

- ç½‘ç»œæœåŠ¡ï¼ˆå¿…é¡»æä¾›æºä»£ç ï¼‰

### âŒ ä¸å…è®¸çš„ï¼ˆåˆ«è¿™ä¹ˆå¹²ï¼‰ï¼š
- åˆ æ‰ç‰ˆæƒå£°æ˜

- ä¸æä¾›æºä»£ç å°±åˆ†å‘

- é—­æºå•†ç”¨ï¼ˆAGPLv3è¦æ±‚å¿…é¡»å¼€æºï¼Œå› æ­¤é—­æºå•†ç”¨ä¸è¢«å…è®¸ï¼‰

**æœ‰bugè‡ªå·±ä¿®å“ˆï¼Œæˆ‘åšçš„æ˜¯ä»£ç ï¼Œä¸æ˜¯æœåŠ¡ã€‚**  
ä½†å¦‚æœèƒ½æŠŠbugç°è±¡å’Œä¿®å¤è¿‡ç¨‹å‘åˆ°Issuesä¹Ÿå¯ä»¥å¸®åˆ°ä¸å°‘äºº

## ğŸ¤ è´¡çŒ®æŒ‡å—
1. Fork æœ¬ä»“åº“

2. åˆ›å»ºä½ çš„ç‰¹æ€§åˆ†æ”¯ (git checkout -b feature/AmazingFeature)

3. æäº¤ä½ çš„ä¿®æ”¹ (git commit -m 'Add some AmazingFeature')

4. æ¨é€åˆ°åˆ†æ”¯ (git push origin feature/AmazingFeature)

5. æäº¤ Pull Request

### é¦–æ¬¡è´¡çŒ®ï¼Ÿæ²¡é—®é¢˜ï¼ å¯ä»¥ä»ä»¥ä¸‹æ–¹é¢å…¥æ‰‹ï¼š

- å¸®å¿™æµ‹è¯•æœªéªŒè¯çš„ç¡¬ä»¶åœºæ™¯ï¼ˆLTDC/DMA2D/FSMCï¼‰

- è¡¥å……æ›´å¤šç§»æ¤ç¤ºä¾‹

- å®Œå–„æ³¨é‡Šæˆ–æ–‡æ¡£

**æ³¨æ„**ï¼šæ‰€æœ‰è´¡çŒ®çš„ä»£ç ä¹Ÿå°†é‡‡ç”¨ AGPLv3 åè®®ã€‚

## ğŸ ç‰¹åˆ«è‡´è°¢

æ„Ÿè°¢è™šæ‹ŸUPä¸» [@Akieç§‹ç»˜](https://space.bilibili.com/4176573) æˆæƒä½¿ç”¨å…¶å½¢è±¡å…ƒç´ ã€‚
ç§‹ç»˜çš„æ­Œå£°é™ªä¼´äº†æ— æ•°ä¸ªdebugçš„æ·±å¤œï¼Œé‚£ç‰‡çº¢æ«å¶ä¹Ÿæˆä¸ºäº†è¿™ä¸ªé¡¹ç›®çš„çµé­‚ã€‚

æœ¬é¡¹ç›®LogoåŠå¯åŠ¨ç”»é¢è®¾è®¡å‡è·å¾—å®˜æ–¹æˆæƒï¼Œè¯·å‹¿åœ¨å…¶ä»–é¡¹ç›®ä¸­ä½¿ç”¨ã€‚

## ğŸ“® è”ç³»æ–¹å¼
- ä½œè€…ï¼š[é›ªç³Sherlyn/Xuelin-Sherlyn]

- å“”å“©å“”å“©: [é›ªç³Sherlynä¸ªäººä¸»é¡µ](https://space.bilibili.com/1815675515)

- é‚®ç®±ï¼š[xuelin-sherlyn@outlook.com](mailto:xuelin-sherlyn@outlook.com)

- GitHubï¼šhttps://github.com/Xuelin-Sherlyn/AkieGUI

- Issuesï¼šhttps://github.com/Xuelin-Sherlyn/AkieGUI/issues

> [!CAUTION]
> ## âš ï¸ é‡è¦æé†’ï¼ˆå¿…è¯»ï¼‰
> 
> **AkieGUI çš„å¼€å‘è€…ä»¬ä¸æ˜¯å¤–åŒ…å›¢é˜Ÿï¼Œä¹Ÿä¸æ˜¯å…è´¹åŠ³åŠ¨åŠ›ï¼Œæ›´ä¸æ˜¯å…è´¹å®¢æœã€‚**
> 
> ### å¦‚æœä½ åªæ˜¯å­¦ä¹ ï¼š
> - âœ… éšä¾¿ç”¨ï¼Œéšä¾¿æ”¹
> - âœ… ä»£ç é‡Œæ³¨é‡Šå†™å¾—å¾ˆæ¸…æ¥š
> - âœ… å‡ºbugè‡ªå·±ä¿®ï¼Œåˆ«æ¥æ‰¾æˆ‘
> 
> ### å¦‚æœä½ æƒ³ç”¨åœ¨äº§å“é‡Œï¼š
> - âœ… å¯ä»¥ï¼Œ**AGPLv3 å…è®¸å…è´¹å•†ç”¨**
> - âœ… ä½†å¿…é¡»å¼€æºä½ çš„ä¿®æ”¹
> - âœ… å¿…é¡»ä¿ç•™ç‰ˆæƒå£°æ˜
> - âš ï¸ **æœ¬é¡¹ç›®ä¸ºä¸ªäººå…´è¶£ç»´æŠ¤ï¼Œä¸æä¾›å•†ä¸šæŠ€æœ¯æ”¯æŒæœåŠ¡ã€‚å¦‚éœ€å•†ä¸šåˆä½œæˆ–å®šåˆ¶å¼€å‘ï¼Œè¯·é€šè¿‡é‚®ä»¶è”ç³»ï¼Œæˆ‘ä»¬è§†æ—¶é—´å’Œç²¾åŠ›å†³å®šæ˜¯å¦æ‰¿æ¥ã€‚**
> - å›å¤å¯èƒ½å¾ˆæ…¢ï¼ˆæ¯•ç«Ÿä¸»ä¸šä¸æ˜¯å¹²è¿™ä¸ªï¼‰ï¼Œæ€¥ç€è¦çš„è¯·ç»•é“ã€‚
> 
> ### å…³äº"èƒŒé”…"ï¼š
> AGPLv3 ç¬¬15-16æ¡å†™å¾—æ˜æ˜ç™½ç™½ï¼š
> - ä»£ç æŒ‰"åŸæ ·"æä¾›ï¼Œ**æ²¡æœ‰ä»»ä½•ä¿è¯**
> - ä½œè€…**ä¸å¯¹ä»»ä½•æŸå¤±è´Ÿè´£**
> - ç”¨äº†å‡ºé—®é¢˜æ˜¯ä½ è‡ªå·±çš„äº‹
> 
> ## ğŸ”§ å…³äº NDA èŠ¯ç‰‡çš„ä½¿ç”¨è¯´æ˜
> 
> AkieGUI é‡‡ç”¨ AGPLv3 åè®®ï¼ŒåŸåˆ™ä¸Šè¦æ±‚æ‰€æœ‰ä½¿ç”¨éƒ½å¿…é¡»å¼€æºã€‚
> 
> ### ğŸ¯ ä½†æˆ‘çŸ¥é“æœ‰äº›èŠ¯ç‰‡å— NDA ä¿æŠ¤
> - è½¦è§„èŠ¯ç‰‡ã€ä¸“ç”¨ICã€æœªå‘å¸ƒçš„æ–°å“
> - ä¸€æ—¦æ¶‰åŠï¼Œ**æ•´ä¸ªé¡¹ç›®éƒ½ä¸èƒ½å…¬å¼€**
> 
> ### ğŸ“¢ ä½œä¸ºä½œè€…ï¼Œæˆ‘çš„æ€åº¦ï¼š
> - âœ… **æˆ‘ä¸ä¼šä¸»åŠ¨è¿½ç©¶ NDA èŠ¯ç‰‡ä¸Šçš„ä½¿ç”¨**
> - âœ… ä½ ä¸éœ€è¦å¼€æº NDA ç›¸å…³ä»£ç 
> 
> ### âš ï¸ åªæœ‰ä¸€ä¸ªè¦æ±‚ï¼š**å‘Šè¯‰æˆ‘ä¸€å£°**
> å‘ä¸ªé‚®ä»¶åˆ° [xuelin-sherlyn@outlook.com](mailto:xuelin-sherlyn@outlook.com)ï¼Œç®€å•è¯´ï¼š
> - "æˆ‘åœ¨ç”¨ AkieGUIï¼Œé¡¹ç›®æ¶‰åŠ NDA èŠ¯ç‰‡"
> - ä¸éœ€è¦å…·ä½“èŠ¯ç‰‡å‹å·ï¼Œä¸éœ€è¦é¡¹ç›®ç»†èŠ‚
> 
> **æˆ‘æ”¶åˆ°é‚®ä»¶å°±ä¼šæ ‡è®°ï¼šè¿™ä¸ªé¡¹ç›®æˆ‘çŸ¥é“ï¼Œä¸è¿½ç©¶ã€‚**
> 
> ### âš ï¸ ä¸ºä»€ä¹ˆå¿…é¡»å‘ŠçŸ¥ï¼Ÿ
> å› ä¸ºå…¶ä»–è´¡çŒ®è€…å¯èƒ½è¿½ç©¶ï¼Œæˆ‘éœ€è¦å¸®ä½ æŒ¡ã€‚
> 
> ### ğŸ¤ ç»™è´¡çŒ®è€…çš„å»ºè®®ï¼š
> å‘ç°æ²¡å¼€æºçš„ NDA é¡¹ç›®ï¼Œå…ˆæŸ¥æˆ‘æœ‰æ²¡æœ‰æ”¶åˆ°å‘ŠçŸ¥é‚®ä»¶ã€‚
> æŸ¥ä¸åˆ°å†å‘ Issueï¼Œåˆ«ç›´æ¥ä¸¾æŠ¥ã€‚
> 
> **æˆ‘ä»¬æ˜¯ä¸€ä¸ªç¤¾åŒºï¼Œç›®æ ‡æ˜¯è®©æ›´å¤šäººå­¦ä¼šåµŒå…¥å¼ï¼Œä¸æ˜¯ä¸ºäº†äº’ç›¸ä¸¾æŠ¥ã€‚**
> 
> â€”â€” é›ªç³Sherlyn

## ğŸ“¢ è¿è§„ä½¿ç”¨ä¸¾æŠ¥é€šé“

å¦‚æœä½ å‘ç°æœ‰äººåœ¨ä»¥ä¸‹åœºæ™¯ä½¿ç”¨äº† AkieGUI ä½†æœªéµå®ˆ AGPLv3ï¼š
- Bç«™/YouTube è§†é¢‘
- å¼€æºé¡¹ç›®
- åŸ¹è®­æœºæ„
- å•†ä¸šäº§å“

è¯·åœ¨æœ¬ä»“åº“æäº¤ Issueï¼Œæä¾›ï¼š
1. è¿è§„é“¾æ¥
2. è¯æ®æˆªå›¾
3. æ˜¯å¦å·²æé†’

æˆ‘ä»¬ä¼šï¼š
âœ… å…¬å¼€è®°å½•ï¼ˆç»™åæ¥è€…è­¦ç¤ºï¼‰
âœ… è”ç³»å¯¹æ–¹æé†’
âœ… å¿…è¦æ—¶å‘å¹³å°æŠ•è¯‰

**ä¿æŠ¤å¼€æºï¼Œéœ€è¦å¤§å®¶ä¸€èµ·ç›‘ç£ã€‚**
